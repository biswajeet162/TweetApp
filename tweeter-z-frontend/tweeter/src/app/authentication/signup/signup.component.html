<div class="tweeter-container">
  <div class="logo-container">
    <i class="fab fa-twitter"></i>
  </div>
  
  <h1>Join Tweeter today</h1>
  
  <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="signup-form">
    <div class="form-group">
      <input 
        type="text" 
        id="name" 
        formControlName="name" 
        placeholder="Name"
        [class.error-input]="signupForm.get('name')?.touched && signupForm.get('name')?.invalid"
      >
      <div class="error" *ngIf="signupForm.get('name')?.touched && signupForm.get('name')?.errors?.['required']">
        What's your name?
      </div>
      <div class="error" *ngIf="signupForm.get('name')?.touched && signupForm.get('name')?.errors?.['maxlength']">
        Name is too long
      </div>
    </div>

    <div class="form-group">
      <div class="handle-input">
        <span class="at-symbol"></span>
        <input 
          type="text" 
          id="handle" 
          formControlName="handle" 
          placeholder="Handle"
          [class.error-input]="signupForm.get('handle')?.touched && signupForm.get('handle')?.invalid"
        >
      </div>
      <div class="error" *ngIf="signupForm.get('handle')?.touched && signupForm.get('handle')?.errors?.['required']">
        Choose a handle
      </div>
      <div class="error" *ngIf="signupForm.get('handle')?.touched && signupForm.get('handle')?.errors?.['pattern']">
        Handle must be 4-15 characters and can only include letters, numbers, and underscores
      </div>
      <div class="handle-availability" *ngIf="!handleAvailable && !signupForm.get('handle')?.errors">
        This handle is already taken
      </div>
    </div>

    <div class="form-group">
      <input 
        type="password" 
        id="password" 
        formControlName="password" 
        placeholder="Password"
        [class.error-input]="signupForm.get('password')?.touched && signupForm.get('password')?.invalid"
      >
      <div class="error" *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.errors?.['required']">
        Create a password
      </div>
      <div class="error" *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.errors?.['minlength']">
        Password must be at least 6 characters
      </div>
    </div>

    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <button type="submit" [disabled]="!signupForm.valid || isLoading || !handleAvailable" class="signup-button">
      {{ isLoading ? 'Creating account...' : 'Sign up' }}
    </button>

    <div class="login-link">
      Already have an account? <a routerLink="/login">Log in</a>
    </div>
  </form>
</div>
